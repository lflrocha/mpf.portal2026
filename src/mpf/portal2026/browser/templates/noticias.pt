<metal:master
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="portalmpf2026"
>
  <metal:content fill-slot="content">
    <main id="main-content" class="w-full">
      <div class="mx-auto max-w-[1440px] px-4 py-6 sm:py-8">

        <header class="rounded-md border border-gray-300 bg-white overflow-hidden">
          <div class="relative overflow-hidden">
            <div class="absolute inset-0 bg-[color:var(--brand)]"></div>
            <div
              class="absolute inset-0 opacity-15"
              style="background-image:
                radial-gradient(circle at 20% 20%, rgba(255,255,255,.8), transparent 55%),
                radial-gradient(circle at 80% 30%, rgba(255,255,255,.6), transparent 55%);"
              aria-hidden="true"
            ></div>

            <div class="relative p-4 sm:p-6 md:p-7 text-white">
              <p class="text-[11px] font-semibold uppercase tracking-wider text-white/90">
                Sala de imprensa
              </p>
              <h1 class="mt-1 text-2xl sm:text-3xl font-semibold leading-tight">
                NotÃ­cias
              </h1>
              <p class="mt-1 text-sm text-white/90 max-w-3xl">
                Filtre por unidade â€” e encontre rapidamente o que vocÃª precisa.
              </p>
            </div>
          </div>

          <div class="p-4 sm:p-6 md:p-7 border-t border-white/15 bg-white">
            <form class="grid gap-3 lg:grid-cols-12" role="search" aria-label="Buscar notÃ­cias">

              <div class="lg:col-span-6">
                <label for="news-search" class="text-xs font-semibold text-gray-700">Buscar</label>
                <div class="mt-1 relative">
                  <span aria-hidden="true" class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">ðŸ”Ž</span>
                  <input
                    id="news-search"
                    type="search"
                    placeholder="Palavra-chaveâ€¦"
                    class="w-full rounded-md border border-gray-300 bg-white pl-10 pr-3 py-2.5 text-sm
                           focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30"
                  />
                </div>
              </div>

              <div class="lg:col-span-3">
                <label for="news-category" class="text-xs font-semibold text-gray-700">Categoria</label>
                <div class="mpf-select mt-1 text-gray-700">
                  <select
                    id="news-category"
                    class="w-full rounded-md border border-gray-300 bg-white px-3 py-2.5 text-sm
                           focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30"
                  >
                    <option value="">Todas</option>
                    <tal:cats tal:repeat="cat view/categories">
                      <option tal:content="cat" tal:attributes="value cat"></option>
                    </tal:cats>
                  </select>
                </div>
              </div>

              <div class="lg:col-span-3">
                <label for="news-sort" class="text-xs font-semibold text-gray-700">Ordenar</label>
                <div class="mpf-select mt-1 text-gray-700">
                  <select
                    id="news-sort"
                    class="w-full rounded-md border border-gray-300 bg-white px-3 py-2.5 text-sm
                           focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30"
                  >
                    <option value="recentes">Mais recentes</option>
                    <option value="antigas">Mais antigas</option>
                  </select>
                </div>
              </div>

              <div class="lg:col-span-12 mt-2 border-t border-gray-200 pt-4"></div>
              <div class="lg:col-span-12 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                <p class="text-xs text-gray-600">
                  Mostrando <span id="news-count" class="font-semibold">0</span> notÃ­cias
                </p>

                <div class="flex items-center gap-2 sm:justify-end">
                  <button
                    type="button"
                    id="applyFilters"
                    class="inline-flex items-center justify-center rounded-md bg-[color:var(--brand)] px-4 py-2.5 text-xs sm:text-sm font-semibold text-white
                           hover:opacity-95 focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30"
                  >
                  </button>
                </div>
              </div>
            </form>
          </div>
        </header>

        <section class="mt-4 sm:mt-6 grid gap-6 lg:grid-cols-12 lg:items-start">

          <aside class="hidden lg:block lg:col-span-4">
            <div class="sticky top-6">
              <section class="rounded-md border border-gray-300 bg-white overflow-hidden flex flex-col h-[calc(80vh)]">
                <header class="p-4 sm:p-6 border-b border-gray-200">
                  <h2 class="text-lg font-semibold text-gray-900">Filtro por unidade</h2>
                  <p class="mt-1 text-sm text-gray-600">Escolha a unidade publicadora.</p>
                </header>

                <div class="p-4 sm:p-6 border-b border-gray-200 grid gap-4">
                  <div>
                    <label for="asideSearch" class="text-xs font-semibold text-gray-700">Buscar na lista</label>
                    <input
                      id="asideSearch"
                      type="search"
                      placeholder="Digite para filtrarâ€¦"
                      class="mt-2 w-full rounded-md border border-gray-300 bg-white px-3 py-2.5 text-sm
                             focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30"
                    />
                  </div>
                </div>

                <div class="flex-1 overflow-y-auto p-3">
                  <ul id="asideList" class="grid gap-2" aria-label="Lista de unidades">
                  </ul>
                </div>
              </section>
            </div>
          </aside>

          <div class="lg:col-span-8">
            <section class="rounded-md border border-gray-300 bg-white overflow-hidden">
              <header class="p-4 sm:p-6 border-b border-gray-200">
                <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                  <div>
                    <h2 class="text-lg font-semibold text-gray-900">Resultados</h2>
                    <p id="filter-status" class="mt-1 text-sm text-gray-600">
                    </p>
                  </div>
                </div>
              </header>

              <div class="p-4 sm:p-6">
                <div id="news-results" class="news-results is-list">

                  <tal:items tal:repeat="brain view/results">
                    <article
                      class="news-item group rounded-md border border-gray-200 bg-white overflow-hidden"
                      tal:attributes="
                        data-origin python:view.unit(brain);
                        data-category brain/Subject;
                        data-datetime brain/EffectiveDate">

                      <div class="news-media" tal:condition="python:view.image_url(brain)">
                        <img
                          tal:attributes="src python:view.image_url(brain); alt brain/Title"
                          loading="lazy"
                        />
                      </div>

                      <div class="p-5">
                        <p class="text-xs font-semibold uppercase tracking-wider text-[color:var(--brand)]"
                           tal:content="brain/Subject | nothing"></p>

                        <h3 class="mt-2 text-base font-semibold leading-snug text-gray-900">
                          <a
                            tal:attributes="href brain/getURL"
                            class="hover:underline focus:outline-none focus:ring-2 focus:ring-[color:var(--brand)]/30 rounded"
                            tal:content="brain/Title">
                          </a>
                        </h3>

                        <p class="mt-2 text-sm text-gray-700 leading-relaxed line-clamp-3"
                           tal:content="brain/Description">
                        </p>

                        <div class="mt-3 text-xs text-gray-500"
                             tal:content="python:view.unit(brain)"></div>

                        <div class="mt-1 text-xs text-gray-500 inline-flex items-center gap-2">
                          <span aria-hidden="true">ðŸ•’</span>
                          <time data-role="datetime"></time>
                        </div>
                      </div>
                    </article>
                  </tal:items>

                </div>
              </div>
            </section>
          </div>
        </section>

      </div>
    </main>

    <script src="../newsResults.js"></script>
    <script src="../app.js"></script>

  </metal:content>
</metal:master>
